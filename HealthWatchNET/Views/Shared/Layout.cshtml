@{
    ViewBag.Title = "Layout";
    bool allowedPages = false;
    string defaultAction = "/Home/TestItem";
    
    switch( ViewContext.RouteData.Values["action"].ToString() ) {
        case "Index":
        case "PrcLogin":
        case "PrcLogout":
            allowedPages = true;
            break;
        default:
            break;
    }

    if (allowedPages == false && Session["userid"] == null)
    {
        Response.Write( "<script type=\"text/javascript\"> location.href = \"/Home/Index\"; </script>" );
        Response.End();
    }
    else
    {
        if (allowedPages == false && Session["userid"] == null)
        {
            Response.Write("<script type=\"text/javascript\"> location.href = \"/Home/Index\"; </script>");
            Response.End();
        }

        if (allowedPages == true && Session["userid"] != null)
        {
            Response.Write("<script type=\"text/javascript\"> location.href = \"" + defaultAction + "\"; </script>");
            Response.End();
        }
    }
    
    if (Session["userid"] != null && ViewContext.RouteData.Values["action"].Equals("Index"))
    {
        Response.Write("<script type=\"text/javascript\"> history.back(); </script>");
        Response.End();
    }
}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf8" />
<title>강남센터 헬스와치.NET</title>
<link rel="shortcut icon" href="~/Css/favicon.ico" />
<link rel="stylesheet" href="~/Css/theme_purple.css" type="text/css" />
<link rel="stylesheet" href="~/Css/slick.grid.css" type="text/css" />
<link rel="stylesheet" href="~/Css/jquery-ui-1.8.16.custom.css" type="text/css" />
<link rel="stylesheet" href="~/Css/datepicker.css" type="text/css" />
</head>

<body>
<table border="0" cellspacing="0" cellpadding="0" width="100%">
<tr>
	<td style="padding:5px; padding-bottom:10px;"><a href="?" /><img src="~/Image/logo.jpg" style="margin:10px;" alt="logo" /></a></td>
	<td valign="bottom">
		<div align="right" style="padding-left:10px;">
		<table cellpadding="0" cellspacing="0" border="0">
		<tr class="login_status">
        @if (Session["userid"] == null)
        {
            <td style="padding-left:5px; padding-right:5px; font-weight:bold; font-family:malgun gothic, dotum; color:#606060;"><b style="color:orange;">로그인하세요</b></td>
        }
        else
        {
			<td style="padding-left:5px; padding-right:5px; font-weight:normal; font-family:malgun gothic, dotum; color:#606060;">
                <b style="color:orange;">@Session["userid"]</b> [ <b style="color:orange;">@Session["name"]</b> / <b>@Session["permtype"]</b> ] 님 안녕하세요
			</td>
			<td style="padding-left:5px; padding-right:5px;">|</td>
            if (Session["permtype"] != null && Session["permtype"].ToString() == "외부연구원" )
            {
                <td style="padding-left:5px; padding-right:5px; font-family:malgun gothic, dotum; color:#606060;">사용기한</td>
                <td style="padding-left:5px; padding-right:5px; font-family:'Malgun Gothic', Dotum; color:#606060; font-size:11px;">@Html.Raw("시작 : " + Session["expiredate"].ToString().Replace("~", "<br />종료 : "))</td>
                <td style="padding-left:5px; padding-right:5px;">|</td>
            }
			<td style="padding-left:5px; padding-right:10px;"><input type="button" value="로그아웃" style="width:70px;" onclick="location.href='/Home/PrcLogout?t=@DateTime.Now.ToFileTime()'" /></td>
        }
		</tr>
		</table>
		</div>
	</td>
</tr>
</table>

<table border="0" cellspacing="0" cellpadding="5" width="100%">
<tr class="headline">
    <th width="140" scope="col">HealthWatch.NET</th>
	<!--<th width="120" scope="col">@Html.ActionLink("수진현황", "TestStat", "Home")</th>-->
    <th width="140" scope="col">@Html.ActionLink("자료검색", "TestSearch", "Home")</th>
	<!--<th width="140" scope="col">@Html.ActionLink("문진표검색", "InvSearch", "Home")</th>-->
	<th width="130" scope="col">@Html.ActionLink("검사항목", "TestItem", "Home")</th>
	<th width="140" scope="col">@Html.ActionLink("검사패키지", "TestPackage", "Home")</th>
    @if (Session["permtype"] != null && Session["permtype"].ToString() == "관리자")
    {
        <th width="140" scope="col">@Html.ActionLink("사용자관리", "UserManager", "Home")</th>
        <th width="140" scope="col">@Html.ActionLink("사용기록조회", "LogManager", "Home")</th>
    }
	<th width="200" scope="col" style="padding-right:0px;">&nbsp;</th>
	<th>&nbsp;</th>
  </tr>
</table>

<table width="100%" cellpadding="10" border="0">
<tr>
	<td width="100%">
    @RenderBody()
    </td>
</tr>
</table>

<!-- allowedPages : @allowedPages / Session userid @Session["userid"] -->
</body>
</html>